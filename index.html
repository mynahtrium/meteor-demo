<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Meteor Impact Simulation</title>
  <link rel="stylesheet" href="styles.css">
  <!-- Leaflet CSS -->
  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
  <!-- Leaflet JavaScript -->
  <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
</head>
<body>
  <!-- Quick Stats Bar (Top Center) -->
  <div id="quickStatsUI">
    <div class="stat-item">
      <span class="stat-label">Active Meteors:</span>
      <span class="stat-value" id="meteorCount">0</span>
    </div>
    <div class="stat-item">
      <span class="stat-label">Total Impacts:</span>
      <span class="stat-value" id="impactCount">0</span>
    </div>
    <div class="stat-item">
      <span class="stat-label">Last Impact Energy:</span>
      <span class="stat-value" id="impactEnergy">-</span>
    </div>
    <div class="stat-item">
      <span class="stat-label">Simulation Time:</span>
      <span class="stat-value" id="simTime">0.0s</span>
    </div>
  </div>

  <!-- Camera Focus UI (Top Right) -->
  <div id="cameraFocusUI">
    <h3>Camera Focus</h3>
    <button id="focusEarth">Focus Earth</button>
    <button id="focusMoon">Focus Moon</button>
    <button id="focusMeteor">Focus Last Meteor</button>
    <button id="focusFree">Free Camera</button>
  </div>

  <!-- Stats UI (Bottom Left) -->
  <div id="statsUI">
    <h3>Last Meteor Stats</h3>
    <div id="meteorStats">
      <div>Speed: <span id="lastSpeed">-</span> m/s</div>
      <div>Size: <span id="lastSize">-</span> m</div>
      <div>Mass: <span id="lastMass">-</span> kg</div>
      <div>Energy: <span id="lastEnergy">-</span> J</div>
      <div>Status: <span id="lastStatus">-</span></div>
    </div>
  </div>

  <!-- Google Maps UI (Bottom Right) -->
  <div id="mapUI">
    <div class="map-header">
      <h3>Impact Map</h3>
      <button id="toggleMapSize" class="map-toggle">Expand</button>
    </div>
    <div id="googleMap" class="map-container"></div>
    <div id="mapInfo">
      <div>Lat: <span id="impactLat">-</span>°</div>
      <div>Lon: <span id="impactLon">-</span>°</div>
      <div>Energy: <span id="mapEnergy">-</span> kt</div>
      <div>Blast Radius: <span id="blastRadius">-</span> km</div>
    </div>
  </div>

  <!-- Statistics UI (Bottom Left) -->
  <div id="statisticsUI">
    <h3>Simulation Statistics</h3>
    <div id="simulationStats">
      <div class="stat-group">
        <h4>Performance</h4>
        <div>FPS: <span id="fps">60</span></div>
        <div>Objects: <span id="objectCount">0</span></div>
        <div>Memory: <span id="memoryUsage">0</span> MB</div>
      </div>
      <div class="stat-group">
        <h4>Physics</h4>
        <div>Gravity: <span id="gravityMode">Simple</span></div>
        <div>Atmosphere: <span id="atmosphereMode">On</span></div>
        <div>Moon Gravity: <span id="moonGravityMode">On</span></div>
      </div>
      <div class="stat-group">
        <h4>Impacts</h4>
        <div>Total Energy: <span id="totalEnergy">0</span> J</div>
        <div>Largest Impact: <span id="largestImpact">0</span> kt</div>
        <div>Avg Impact: <span id="avgImpact">0</span> kt</div>
      </div>
    </div>
  </div>

  <!-- Keyboard Shortcuts Help (Top Right) -->
  <div id="helpUI">
    <div class="help-header">
      <h3>Keyboard Shortcuts</h3>
      <button id="toggleHelp" class="help-toggle">Collapse</button>
    </div>
    <div id="shortcuts" class="shortcuts-content">
      <div><kbd>Space</kbd> - Fire Meteor</div>
      <div><kbd>R</kbd> - Reset Scene</div>
      <div><kbd>P</kbd> - Pause/Resume</div>
      <div><kbd>E</kbd> - Focus Earth</div>
      <div><kbd>M</kbd> - Focus Moon</div>
      <div><kbd>T</kbd> - Focus Meteor</div>
      <div><kbd>F</kbd> - Free Camera</div>
      <div><kbd>G</kbd> - Toggle Gravity</div>
    </div>
  </div>

  <div id="ui">
    <label>Simulation Speed:</label>
    <div class="speed-control">
      <input type="range" id="simSpeed" min="0.01" max="10" step="0.01" value="1">
      <input type="number" id="simSpeedInput" min="0.01" max="1000" step="0.01" value="1" placeholder="Enter speed">
      <div class="speed-labels">
        <span>0.01x</span>
        <span>1x</span>
        <span>10x</span>
      </div>
      <div class="small">x <span id="simSpeedVal">1.00</span></div>
    </div>

    <label>Meteor Speed</label>
    <div class="speed-control">
      <input type="range" id="speed" min="0.01" max="0.2" step="0.01" value="0.05">
      <input type="number" id="speedInput" min="0.01" max="10" step="0.01" value="0.05" placeholder="Enter speed">
      <div class="small">v <span id="speedVal">0.05</span></div>
    </div>

    <div class="button-row">
      <button id="reset">Reset</button>
      <button id="pause">Pause</button>
      <button id="toggleAiming">Hide Aiming</button>
      <button id="fire">Fire</button>
    </div>
    <hr>

    <label>NASA API Key:</label>
    <input type="text" id="apiKey" placeholder="Enter your key" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false">
    <button id="fetch">Fetch Asteroid List</button>
  <button id="loadMore">Load More Asteroids</button>

    <label>Select Asteroid:</label>
    <select id="asteroidSelect"></select>
    <button id="selectAsteroid">Select Asteroid</button>
    <button id="createOrbit">Create Orbital Object</button>

  <label>Physics</label>
  <button id="toggleRealism">Enable Realistic Physics</button>
  <button id="toggleAtmosphere">Show Atmosphere</button>
  <button id="toggleMoon">Show Moon</button>
    <button id="toggleGravityViz">Show Gravity Fields</button>
  <button id="highResTex">Load High-res Earth Texture</button>
  <label style="margin-top:6px;display:block;font-weight:normal">Or upload a local Earth texture:</label>
  <input type="file" id="uploadTex" accept="image/*" autocomplete="off">

    <div id="asteroidData"></div>
  </div>
  <script type="module" src="/main.js"></script>
</body>
</html>
